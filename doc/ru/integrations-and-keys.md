# Интеграции и API-ключи

Ниже - назначение MCP-интеграций по фактам из конфигурации проекта и официальных страниц сервисов.

Важно: статус "требуется ключ" в этом разделе привязан к текущей реализации AssistAgents, а не к теоретическим возможностям внешнего сервиса.

## Для чего какая интеграция

### `tavily-search` (`TAVILY_API_KEY`)

- Для чего: веб-поиск и извлечение данных через Tavily MCP.
- Где полезно: исследование внешних источников в агентных задачах.
- В AssistAgents: ключ обязателен.
- Официально: Tavily MCP docs - `https://docs.tavily.com/documentation/mcp`.

### `ddg-search` (без ключа)

- Для чего: веб-поиск через DuckDuckGo MCP-сервер.
- Где полезно: быстрый поиск и базовый ресерч без настройки API-ключей.
- В AssistAgents: ключ не требуется.
- Источник по серверу: PyPI `duckduckgo-mcp-server` - `https://pypi.org/project/duckduckgo-mcp-server/`.

### `zai-web-search` (`ZAI_API_KEY`)

- Для чего: поиск в вебе через Z.AI Web Search MCP.
- Где полезно: получение актуальной внешней информации и ссылок в ходе разработки.
- В AssistAgents: ключ обязателен.
- Официально: `https://docs.z.ai/devpack/mcp/search-mcp-server`.

### `zai-web-reader` (`ZAI_API_KEY`)

- Для чего: чтение и извлечение содержимого страниц через Z.AI Web Reader MCP.
- Где полезно: когда нужно получить содержимое страницы, а не только результаты поиска.
- В AssistAgents: ключ обязателен.
- Официально: `https://docs.z.ai/devpack/mcp/reader-mcp-server`.

### `context7` (`CONTEXT7_API_KEY`)

- Для чего: доступ к актуальной документации библиотек/фреймворков и примерам.
- Где полезно: точные ответы по API и версиям библиотек.
- В AssistAgents: ключ обязателен.
- Официально: `https://github.com/upstash/context7`.

### `github-grep` (без ключа)

- Для чего: поиск реальных примеров кода в публичных GitHub-репозиториях.
- Где полезно: посмотреть практические шаблоны использования API/библиотек.
- В AssistAgents: ключ не требуется, подключение идет к `https://mcp.grep.app`.

### `deepwiki` (без ключа)

- Для чего: работа с DeepWiki MCP как внешним источником по репозиториям.
- Где полезно: быстрый обзор репозиториев и связанного контекста.
- В AssistAgents: ключ не требуется, подключение идет к `https://mcp.deepwiki.com/mcp`.
- Примечание: публичная документация по ограничениям/квотам может меняться, проверяйте у провайдера.

### `chrome-devtools` (без ключа)

- Для чего: управление и отладка живого Chrome через DevTools MCP.
- Где полезно: UI-диагностика, консоль/сеть, трассировки производительности.
- В AssistAgents: ключ не требуется, локальный запуск `npx -y chrome-devtools-mcp@latest`.
- Официально: `https://github.com/ChromeDevTools/chrome-devtools-mcp`.

## Как получить ключи

### `TAVILY_API_KEY`

1. Откройте Tavily: `https://www.tavily.com/`.
2. Перейдите в dashboard: `https://app.tavily.com/home`.
3. Создайте/скопируйте API key и передайте его установщику как `TAVILY_API_KEY`.

### `ZAI_API_KEY`

1. Откройте Z.AI API key console: `https://z.ai/manage-apikey/apikey-list`.
2. Создайте API key.
3. Используйте этот ключ для обеих интеграций: `zai-web-search` и `zai-web-reader`.
4. Нужно либо пополнить баланс API, либо использовать подписку Z.AI Coding Plan уровнем Pro и выше.

### `CONTEXT7_API_KEY`

1. Откройте dashboard: `https://context7.com/dashboard`.
2. Сгенерируйте/скопируйте ключ.
3. Передайте его установщику как `CONTEXT7_API_KEY`.

## Где хранятся ключи

Ключи сохраняются как отдельные файлы в `~/.opencode/keys/`:

- `zai_api.txt` (`ZAI_API_KEY`)
- `context7.txt` (`CONTEXT7_API_KEY`)
- `tavily_search.txt` (`TAVILY_API_KEY`)

Эти файлы используются в `~/.opencode/opencode.jsonc` через ссылки вида `{file:...}`.

## Как установщик обрабатывает ключи

- Если ключ уже есть, установщик предложит оставить текущее значение или заменить.
- Если ключа нет, установщик предложит ввести его сразу.
- Если ключ не введен, зависящие от него интеграции автоматически отключаются.

## Практические рекомендации

- Держите `~/.opencode/keys/` в приватной зоне пользователя.
- Не добавляйте ключевые файлы в git.
- После изменения ключей повторно запустите установщик, чтобы обновить финальную MCP-конфигурацию.
